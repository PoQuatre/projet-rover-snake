(()=>{"use strict";var t;!function(t){t[t.UP=0]="UP",t[t.DOWN=1]="DOWN",t[t.LEFT=2]="LEFT",t[t.RIGHT=3]="RIGHT"}(t||(t={}));const e=20,i=50,a=50,n=(t,e,i)=>Math.min(Math.max(t,e),i),l={direction:t.UP,x:0,y:0,tailLength:0,tail:[],move(){let{x:e,y:i}=l;switch(this.direction){case t.UP:i--;break;case t.DOWN:i++;break;case t.LEFT:e--;break;case t.RIGHT:e++}return l.x=n(e,0,9),l.y=n(i,0,9),l.x!==e||l.y!==i},spawn(){this.x=Math.floor(10*Math.random()),this.y=Math.floor(10*Math.random());const e=10-this.x-1,i=10-this.y-1;Math.max(this.x,e)>Math.max(this.y,i)?this.direction=this.x>e?t.LEFT:t.RIGHT:this.direction=this.y>i?t.UP:t.DOWN}},r={respawn(){this.x=Math.floor(10*Math.random()),this.y=Math.floor(10*Math.random())}},o=(t,n,o)=>{t.clearRect(0,0,n,o),(t=>{for(let n=0;n<10;n++)for(let l=0;l<10;l++)t.strokeRect(e+n*i,e+l*a,i,a)})(t),(t=>{t.fillStyle="#0f0",t.fillRect(e+l.x*i,e+l.y*a,i,a),t.fillStyle="#000"})(t),(t=>{t.fillStyle="#0f09";for(let n=0;n<l.tail.length;n++)t.fillRect(e+l.tail[n].x*i,e+l.tail[n].y*a,i,a);t.fillStyle="#000"})(t),(t=>{t.fillStyle="#f00","number"==typeof r.x&&"number"==typeof r.y&&t.fillRect(e+r.x*i,e+r.y*a,i,a),t.fillStyle="#000"})(t)},c=document.getElementById("game"),s=c.getContext("2d");if(null===s)throw new Error("An error occured while getting the canvas context");c.width=540,c.height=540,document.addEventListener("keydown",(e=>{switch(e.code){case"ArrowUp":case"KeyW":l.direction=t.UP;break;case"ArrowDown":case"KeyS":l.direction=t.DOWN;break;case"ArrowLeft":case"KeyA":l.direction=t.LEFT;break;case"ArrowRight":case"KeyD":l.direction=t.RIGHT}})),(()=>{let e=null,i=null;document.addEventListener("touchstart",(t=>{e=t.touches[0].clientX,i=t.touches[0].clientY})),document.addEventListener("touchmove",(a=>{if(!e||!i)return;const n=e-a.touches[0].clientX,r=i-a.touches[0].clientY;Math.abs(n)<100&&Math.abs(r)<100||(Math.abs(n)>Math.abs(r)?l.direction=n>0?t.LEFT:t.RIGHT:l.direction=r>0?t.UP:t.DOWN,e=null,i=null)}))})(),l.spawn(),r.respawn();const h=setInterval((()=>{l.tail.unshift({x:l.x,y:l.y}),l.move()&&clearInterval(h),l.x===r.x&&l.y===r.y&&(l.tailLength++,r.respawn()),l.tail=l.tail.slice(0,l.tailLength),requestAnimationFrame((()=>o(s,c.width,c.height)))}),250);o(s,c.width,c.height)})();