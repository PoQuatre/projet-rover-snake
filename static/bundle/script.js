(()=>{"use strict";var t;!function(t){t[t.UP=0]="UP",t[t.DOWN=1]="DOWN",t[t.LEFT=2]="LEFT",t[t.RIGHT=3]="RIGHT"}(t||(t={}));const e=20,a=50,i=50,r=(t,e,a)=>Math.min(Math.max(t,e),a),n={direction:t.UP,x:0,y:0,move(){let{x:e,y:a}=n;switch(this.direction){case t.UP:a--;break;case t.DOWN:a++;break;case t.LEFT:e--;break;case t.RIGHT:e++}return n.x=r(e,0,9),n.y=r(a,0,9),n.x!==e||n.y!==a},spawn(){this.x=Math.floor(10*Math.random()),this.y=Math.floor(10*Math.random());const e=10-this.x-1,a=10-this.y-1;Math.max(this.x,e)>Math.max(this.y,a)?this.direction=this.x>e?t.LEFT:t.RIGHT:this.direction=this.y>a?t.UP:t.DOWN}},o={respawn(){this.x=Math.floor(10*Math.random()),this.y=Math.floor(10*Math.random())}},c=(t,r,c)=>{t.clearRect(0,0,r,c),(t=>{for(let r=0;r<10;r++)for(let n=0;n<10;n++)t.strokeRect(e+r*a,e+n*i,a,i)})(t),(t=>{t.fillStyle="#0f0",t.fillRect(e+n.x*a,e+n.y*i,a,i),t.fillStyle="#000"})(t),(t=>{t.fillStyle="#f00","number"==typeof o.x&&"number"==typeof o.y&&t.fillRect(e+o.x*a,e+o.y*i,a,i),t.fillStyle="#000"})(t)},s=document.getElementById("game"),h=s.getContext("2d");if(null===h)throw new Error("An error occured while getting the canvas context");s.width=540,s.height=540,document.addEventListener("keydown",(e=>{switch(e.code){case"ArrowUp":case"KeyW":n.direction=t.UP;break;case"ArrowDown":case"KeyS":n.direction=t.DOWN;break;case"ArrowLeft":case"KeyA":n.direction=t.LEFT;break;case"ArrowRight":case"KeyD":n.direction=t.RIGHT}})),(()=>{let e=null,a=null;document.addEventListener("touchstart",(t=>{e=t.touches[0].clientX,a=t.touches[0].clientY})),document.addEventListener("touchmove",(i=>{if(!e||!a)return;const r=e-i.touches[0].clientX,o=a-i.touches[0].clientY;Math.abs(r)<100&&Math.abs(o)<100||(Math.abs(r)>Math.abs(o)?n.direction=r>0?t.LEFT:t.RIGHT:n.direction=o>0?t.UP:t.DOWN,e=null,a=null)}))})(),n.spawn(),o.respawn();const l=setInterval((()=>{n.move()&&clearInterval(l),n.x===o.x&&n.y===o.y&&o.respawn(),requestAnimationFrame((()=>c(h,s.width,s.height)))}),250);c(h,s.width,s.height)})();